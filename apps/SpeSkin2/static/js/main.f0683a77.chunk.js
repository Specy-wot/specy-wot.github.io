(this["webpackJsonpreact-gota"]=this["webpackJsonpreact-gota"]||[]).push([[0],{43:function(e,t,s){},44:function(e,t,s){},45:function(e,t,s){"use strict";s.r(t);var n=s(9),a=s.n(n),i=s(13),r=s(2),c=s(3),o=s(5),l=s(4),h=s(0),d=s(1),p=s(14),k=s.n(p),u=s(15),m=s.n(u),j=(s(43),s(44),s(6)),S=function(e){Object(o.a)(s,e);var t=Object(l.a)(s);function s(e){var n;return Object(r.a)(this,s),(n=t.call(this,e)).toggleName=function(){n.setState({nameShown:!0})},n.hideName=function(){n.setState({nameShown:!1})},n.state={skin:n.props.skin,nameShown:!1},"gallery"===n.props.type?n.addSkin=n.props.addSkin.bind(Object(j.a)(n),n.props.skin):n.removeSkin=n.props.removeSkin.bind(Object(j.a)(n),n.props.skin),n}return Object(c.a)(s,[{key:"render",value:function(){var e=this.props.skin,t="https://gamedata.gota.io/skins/"+e+".png",s="gallery"===this.props.type;return Object(h.jsxs)("div",{className:"skinWrapper",onMouseOver:this.toggleName,onMouseLeave:this.hideName,onClick:this.toggleName,children:[Object(h.jsx)("div",{className:this.state.nameShown?"skinText":"skinText hidden",children:e}),Object(h.jsx)("img",{src:t,className:"skinImg"}),Object(h.jsx)("div",{className:"buttonsHolder",children:Object(h.jsx)("button",{className:s?"skinBtn green":"skinBtn red",onClick:s?this.props.addSkin:this.props.removeSkin,children:s?"+":"-"})})]})}}]),s}(d.Component),g=s(16),v=function(e){Object(o.a)(s,e);var t=Object(l.a)(s);function s(e){var n;return Object(r.a)(this,s),(n=t.call(this,e)).getPage=function(){var e=n.state.skins;if(0!==n.props.skins.length)if(n.props.skins.length<n.skinsPerPage)n.setState({skins:n.props.skins,search:n.props.search});else if(n.props.dontRandomize)n.setState({skins:n.props.skins,search:n.props.search});else{for(var t=0;t<n.skinsPerPage;t++){var s=Math.floor(Math.random()*n.props.skins.length);n.currentIndex++;var a=n.props.skins[s];e.push(a)}n.setState({skins:e,search:n.props.search})}},n.skinsPerPage=20,n.state={skins:[],search:""},n.currentIndex=0,n}return Object(c.a)(s,[{key:"render",value:function(){var e=this;return 0===this.state.skins.length&&this.getPage(),this.state.search!==this.props.search&&this.getPage(),Object(h.jsx)("div",{id:this.props.elId,className:"skinsHolder  scroll-bar",children:Object(h.jsx)(g.a,{className:"infiniteScroll",dataLength:this.state.skins.length,hasMore:!0,next:this.getPage,scrollableTarget:this.props.elId,children:this.state.skins.map((function(t,s){return Object(h.jsx)(S,{skin:t,type:e.props.type,addSkin:e.props.addSkin,removeSkin:e.props.removeSkin},s)}))})})}}]),s}(d.Component),b=function(e){Object(o.a)(s,e);var t=Object(l.a)(s);function s(e){var n;return Object(r.a)(this,s),(n=t.call(this,e)).updateSeries=function(e){n.setState({currentSearch:e.target.value.toLowerCase()})},n.state={currentSearch:""},n}return Object(c.a)(s,[{key:"render",value:function(){return Object(h.jsxs)("div",{className:"view",children:[Object(h.jsx)("div",{className:"series",children:Object(h.jsxs)("div",{className:"searchRow",children:[Object(h.jsx)("input",{type:"text",className:"searchInput wm-L1",placeholder:"Skin name",onBlur:this.updateSeries}),Object(h.jsx)("button",{className:"searchBtn wm-L1",onClick:this.props.search.bind(this,this.state.currentSearch),children:"\ud83d\udd0d"})]})}),Object(h.jsx)(v,{dontRandomize:!0,search:this.props.searchName,elId:"search",skins:this.props.skins,addSkin:this.props.addSkin,type:this.props.type,removeSkin:this.props.removeSkin})]})}}]),s}(d.Component),O=function(e){Object(o.a)(s,e);var t=Object(l.a)(s);function s(e){return Object(r.a)(this,s),t.call(this,e)}return Object(c.a)(s,[{key:"render",value:function(){return Object(h.jsxs)("div",{className:"view",children:[Object(h.jsx)("div",{className:"title",children:"Gallery"}),Object(h.jsx)(v,{elId:"gallery",search:"",skins:this.props.skins,addSkin:this.props.addSkin,type:this.props.type,removeSkin:this.props.removeSkin})]})}}]),s}(d.Component),x=function(e){Object(o.a)(s,e);var t=Object(l.a)(s);function s(e){return Object(r.a)(this,s),t.call(this,e)}return Object(c.a)(s,[{key:"render",value:function(){return Object(h.jsxs)("div",{className:"view",children:[Object(h.jsx)("div",{className:"title",children:"Your skins"}),Object(h.jsx)(v,{elId:"savedSkins",search:"",type:this.props.type,addSkin:this.props.addSkin,skins:this.props.skins,removeSkin:this.props.removeSkin})]})}}]),s}(d.Component),f=function(e){Object(o.a)(s,e);var t=Object(l.a)(s);function s(e){var n;return Object(r.a)(this,s),(n=t.call(this,e)).handleFocus=function(e){return e.target.select()},n.export=function(){var e=localStorage.getItem("savedSkins");e=null===e?[]:JSON.parse(e),n.setState({exportedSkins:e.join(",")})},n.handleInputChange=function(e){n.setState({importedSkins:e.target.value})},n.sendSkinArr=function(){var e=n.state.importedSkins;if(""!=e){var t=e.split(",");n.props.importSkinArr(t),n.setState({importedSkins:""})}else alert("Write some skins first!")},n.state={exportedSkins:"",importedSkins:""},n}return Object(c.a)(s,[{key:"render",value:function(){return Object(h.jsx)("div",{className:"view",children:Object(h.jsxs)("div",{className:"importExport",children:[Object(h.jsxs)("div",{className:"inputColumn",children:[Object(h.jsx)("button",{className:"button green imexBtn",onClick:this.export,children:"Export saved skins"}),Object(h.jsx)("textarea",{placeholder:"Your skins will be here",onClick:this.handleFocus,className:"skinsInput wm-L2",value:this.state.exportedSkins,readOnly:!0})]}),Object(h.jsxs)("div",{className:"inputColumn",children:[Object(h.jsx)("button",{className:"button darkTeal imexBtn",onClick:this.sendSkinArr,children:"Import skins"}),Object(h.jsx)("textarea",{placeholder:"Write skins to import here separated by a comma, example: skin1,skin2,skin3",className:"skinsInput wm-L2",onChange:this.handleInputChange,value:this.state.importedSkins})]})]})})}}]),s}(d.Component),N=function(e){Object(o.a)(s,e);var t=Object(l.a)(s);function s(){var e;Object(r.a)(this,s),(e=t.call(this)).getSkins=Object(i.a)(a.a.mark((function t(){var s,n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=[],0===(n=null===(n=localStorage.getItem("gameSkins"))?[]:JSON.parse(n)).length){t.next=7;break}e.setState({skins:n,loading:!1}),t.next=12;break;case 7:return t.next=9,fetch("https://cors-anywhere.herokuapp.com/https://gamedata.gota.io/skinData.php").then((function(e){return e.json()}));case 9:s=t.sent,s=JSON.parse(s.names),e.setState({skins:s,loading:!1});case 12:return t.next=14,fetch("https://cors-anywhere.herokuapp.com/https://gamedata.gota.io/skinData.php").then((function(e){return e.json()}));case 14:s=t.sent,(s=JSON.parse(s.names)).length>n.length&&(localStorage.setItem("gameSkins",JSON.stringify(s)),console.log("updated"));case 17:case"end":return t.stop()}}),t)}))),e.addskin=function(t){t=t.target.parentElement.parentElement.querySelector(".skinText").innerText;var s=e.state.savedSkins;s.includes(t)||(s.push(t),localStorage.setItem("savedSkins",JSON.stringify(s)),e.setState({savedSkins:s}))},e.importSkinArr=function(t){var s=e.state.savedSkins;t.forEach((function(e){s.includes(e)||s.push(e)})),e.setState({savedSkins:s}),localStorage.setItem("savedSkins",JSON.stringify(s)),e.setState({savedSkins:s})},e.removeSkin=function(t){t=t.target.parentElement.parentElement.querySelector(".skinText").innerText;var s=e.state.savedSkins,n=s.indexOf(t);-1!==n&&(s.splice(n,1),localStorage.setItem("savedSkins",JSON.stringify(s)),e.setState({skins:s}))},e.search=function(t){if(""!=t.length){var s=e.state.skins,n=new RegExp("^\\d*"+t+"\\d*$");(s=s.filter((function(e){return n.test(e)}))).sort((function(e,t){return e.localeCompare(t,navigator.languages[0]||navigator.language,{numeric:!0,ignorePunctuation:!0})})),e.setState({searchSkin:t,searchSkins:s})}},e.changePageIndex=function(t){e.setState({pageIndex:t})};var n=null===localStorage.getItem("savedSkins")?[]:JSON.parse(localStorage.getItem("savedSkins"));return e.state={loading:!0,skins:[],pageIndex:0,savedSkins:n,searchSkin:"",searchSkins:[]},e}return Object(c.a)(s,[{key:"componentDidMount",value:function(){this.getSkins()}},{key:"render",value:function(){var e="navItem dm-L1",t="navItem selectedTab",s=this.state.pageIndex;return Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{className:"navbar dm-L3",children:[Object(h.jsx)("button",{className:0===s?t:e,onClick:this.changePageIndex.bind(this,0),children:"Discover"}),Object(h.jsx)("button",{className:1===s?t:e,onClick:this.changePageIndex.bind(this,1),children:"Gallery"}),Object(h.jsx)("button",{className:2===s?t:e,onClick:this.changePageIndex.bind(this,2),children:"Your skins"}),Object(h.jsx)("button",{className:3===s?t:e,onClick:this.changePageIndex.bind(this,3),children:"Other"})]}),this.state.loading?Object(h.jsx)("div",{className:"title text-white",children:"Loading..."}):Object(h.jsx)("div",{}),Object(h.jsxs)(m.a,{index:s,onChangeIndex:this.changePageIndex,className:"slider",children:[Object(h.jsx)(b,{skins:this.state.searchSkins,search:this.search,searchName:this.state.searchSkin,addSkin:this.addskin,type:"gallery"}),Object(h.jsx)(O,{skins:this.state.skins,addSkin:this.addskin,type:"gallery"}),Object(h.jsx)(x,{skins:this.state.savedSkins,removeSkin:this.removeSkin,type:"savedSkins"}),Object(h.jsx)(f,{importSkinArr:this.importSkinArr})]})]})}}]),s}(d.Component);k.a.render(Object(h.jsx)(N,{}),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.f0683a77.chunk.js.map